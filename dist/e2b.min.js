(function(b,c){'object'==typeof exports&&'object'==typeof module?module.exports=c(require('e2d')):'function'==typeof define&&define.amd?define(['e2d'],c):'object'==typeof exports?exports.e2b=c(require('e2d')):b.e2b=c(b.e2d)})(this,function(a){return function(b){function c(g){if(d[g])return d[g].exports;var h=d[g]={i:g,l:!1,exports:{}};return b[g].call(h.exports,h,h.exports,c),h.l=!0,h.exports}var d={};return c.m=b,c.c=d,c.i=function(g){return g},c.d=function(g,h,k){c.o(g,h)||Object.defineProperty(g,h,{configurable:!1,enumerable:!0,get:k})},c.n=function(g){var h=g&&g.__esModule?function(){return g['default']}:function(){return g};return c.d(h,'a',h),h},c.o=function(g,h){return Object.prototype.hasOwnProperty.call(g,h)},c.p='',c(c.s=17)}([function(b){b.exports={transform:0,setTransform:1,scale:2,translate:3,rotate:4,skewX:5,skewY:6,restore:7,fillRect:8,strokeRect:9,clearRect:10,rect:11,fillStyle:12,strokeStyle:13,endFillStyle:14,endStrokeStyle:15,lineStyle:16,endLineStyle:17,textStyle:18,endTextStyle:19,shadowStyle:20,endShadowStyle:21,fillText:22,strokeText:23,fillArc:24,strokeArc:25,arc:26,ellipse:27,globalCompositeOperation:28,endGlobalCompositeOperation:29,fill:30,stroke:31,beginClip:32,clip:33,endClip:34,beginPath:35,closePath:36,globalAlpha:37,endGlobalAlpha:38,hitRect:39,hitRegion:40,moveTo:41,lineTo:42,bezierCurveTo:43,quadraticCurveTo:44,imageSmoothingEnabled:45,endImageSmoothingEnabled:46,custom:47,arcTo:48}},function(b){b.exports=['ltr','rtl','inherit']},function(b){b.exports=['source-over','source-in','source-out','source-atop','destination-over','destination-in','destination-out','destination-atop','lighter','copy','xor','multiply','screen','overlay','darken','lighten','color-dodge','color-burn','hard-light','soft-light','difference','exclusion','hue','saturation','color','luminosity']},function(b){b.exports=['butt','round','square']},function(b){b.exports=['bevel','round','miter']},function(b){b.exports=['left','right','center','start','end']},function(b){b.exports=['top','hanging','middle','alphabetic','ideographic','bottom']},function(b){b.exports=(c,d,g)=>{let h=[];for(let k=0;k<g;k++)h.push(c[k]);return h}},function(b){b.exports=(c,d,g)=>{let h='';for(let k=0;k<g;k++)h+=String.fromCharCode(c[d+k]);return h}},function(b){b.exports=a},function(b){b.exports=(c,d)=>{for(let g=0;g<d.length;g++)c.push(d.charCodeAt(g))}},function(b,c,d){(function(g){function h(o,q){var r=0;for(var s=o.length-1;0<=s;s--){var t=o[s];'.'===t?o.splice(s,1):'..'===t?(o.splice(s,1),r++):r&&(o.splice(s,1),r--)}if(q)for(;r--;r)o.unshift('..');return o}function k(o,q){if(o.filter)return o.filter(q);var r=[];for(var s=0;s<o.length;s++)q(o[s],s,o)&&r.push(o[s]);return r}var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m=function(o){return l.exec(o).slice(1)};c.resolve=function(){var o='',q=!1;for(var r=arguments.length-1;-1<=r&&!q;r--){var s=0<=r?arguments[r]:g.cwd();if('string'!=typeof s)throw new TypeError('Arguments to path.resolve must be strings');else if(!s)continue;o=s+'/'+o,q='/'===s.charAt(0)}return o=h(k(o.split('/'),function(t){return!!t}),!q).join('/'),(q?'/':'')+o||'.'},c.normalize=function(o){var q=c.isAbsolute(o),r='/'===n(o,-1);return o=h(k(o.split('/'),function(s){return!!s}),!q).join('/'),o||q||(o='.'),o&&r&&(o+='/'),(q?'/':'')+o},c.isAbsolute=function(o){return'/'===o.charAt(0)},c.join=function(){var o=Array.prototype.slice.call(arguments,0);return c.normalize(k(o,function(q){if('string'!=typeof q)throw new TypeError('Arguments to path.join must be strings');return q}).join('/'))},c.relative=function(o,q){function r(y){for(var z=0;z<y.length&&''===y[z];z++);for(var A=y.length-1;0<=A&&''===y[A];A--);return z>A?[]:y.slice(z,A-z+1)}o=c.resolve(o).substr(1),q=c.resolve(q).substr(1);var s=r(o.split('/')),t=r(q.split('/')),u=Math.min(s.length,t.length),v=u;for(var w=0;w<u;w++)if(s[w]!==t[w]){v=w;break}var x=[];for(var w=v;w<s.length;w++)x.push('..');return x=x.concat(t.slice(v)),x.join('/')},c.sep='/',c.delimiter=':',c.dirname=function(o){var q=m(o),r=q[0],s=q[1];return r||s?(s&&(s=s.substr(0,s.length-1)),r+s):'.'},c.basename=function(o,q){var r=m(o)[2];return q&&r.substr(-1*q.length)===q&&(r=r.substr(0,r.length-q.length)),r},c.extname=function(o){return m(o)[3]};var n=function(o,q,r){return o.substr(q,r)}}).call(c,d(13))},function(b,c,d){function g(l){return d(h(l))}function h(l){var m=k[l];if(!(m+1))throw new Error('Cannot find module \''+l+'\'.');return m}var k={'./consts.js':0,'./deserialize.js':14,'./directionProps.js':1,'./getArray.js':7,'./getString.js':8,'./globalCompositeOperationProps.js':2,'./lineCapProps.js':3,'./lineJoinProps.js':4,'./pushString.js':10,'./render.js':15,'./serialize.js':16,'./textAlignProps.js':5,'./textBaselineProps.js':6};g.keys=function(){return Object.keys(k)},g.resolve=h,b.exports=g,g.id=12},function(b){function c(){throw new Error('setTimeout has not been defined')}function d(){throw new Error('clearTimeout has not been defined')}function g(w){if(q===setTimeout)return setTimeout(w,0);if((q===c||!q)&&setTimeout)return q=setTimeout,setTimeout(w,0);try{return q(w,0)}catch(x){try{return q.call(null,w,0)}catch(y){return q.call(this,w,0)}}}function h(w){if(r===clearTimeout)return clearTimeout(w);if((r===d||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(w);try{return r(w)}catch(x){try{return r.call(null,w)}catch(y){return r.call(this,w)}}}function k(){t&&u&&(t=!1,u.length?s=u.concat(s):v=-1,s.length&&l())}function l(){if(!t){var w=g(k);t=!0;for(var x=s.length;x;){for(u=s,s=[];++v<x;)u&&u[v].run();v=-1,x=s.length}u=null,t=!1,h(w)}}function m(w,x){this.fun=w,this.array=x}function n(){}var o=b.exports={},q,r;(function(){try{q='function'==typeof setTimeout?setTimeout:c}catch(w){q=c}try{r='function'==typeof clearTimeout?clearTimeout:d}catch(w){r=d}})();var s=[],t=!1,u,v=-1;o.nextTick=function(w){var x=Array(arguments.length-1);if(1<arguments.length)for(var y=1;y<arguments.length;y++)x[y-1]=arguments[y];s.push(new m(w,x)),1!==s.length||t||g(l)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title='browser',o.browser=!0,o.env={},o.argv=[],o.version='',o.versions={},o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(){throw new Error('process.binding is not supported')},o.cwd=function(){return'/'},o.chdir=function(){throw new Error('process.chdir is not supported')},o.umask=function(){return 0}},function(b,c,d){let g=d(0),{Instruction:h}=d(9),k=d(3);d(4);let l=d(6),m=d(5),n=d(1),o=d(2),q={[g.fillRect]:'fillRect',[g.strokeRect]:'strokeRect',[g.clearRect]:'clearRect',[g.rect]:'rect'},r={[g.fillText]:'fillText',[g.strokeText]:'strokeText'},s={[g.fillArc]:'fillArc',[g.strokeArc]:'strokeArc',[g.arc]:'arc'},t={[g.endFillStyle]:'endFillStyle',[g.endLineStyle]:'endLineStyle',[g.endStrokeStyle]:'endStrokeStyle',[g.endLineStyle]:'endLineStyle',[g.endShadowStyle]:'endShadowStyle',[g.endTextStyle]:'endTextStyle',[g.restore]:'restore',[g.endGlobalCompositeOperation]:'endGlobalCompositeOperation',[g.fill]:'fill',[g.stroke]:'stroke',[g.beginClip]:'beginClip',[g.clip]:'clip',[g.endClip]:'endClip',[g.beginPath]:'beginPath',[g.closePath]:'closePath',[g.endGlobalAlpha]:'endGlobalAlpha',[g.endImageSmoothingEnabled]:'endImageSmoothingEnabled'},u={[g.moveTo]:'moveTo',[g.lineTo]:'lineTo'},v=d(8),w=d(7);b.exports=(x,y)=>{let z=[];for(let A=0;A<x.length;){let B=x[A];if(B===g.transform){z.push(new h('transform',[x[A+1],x[A+2],x[A+3],x[A+4],x[A+5],x[A+6]])),A+=7;continue}if(B===g.setTransform){z.push(new h('setTransform',[x[A+1],x[A+2],x[A+3],x[A+4],x[A+5],x[A+6]])),A+=7;continue}if(B===g.scale){z.push(new h('scale',{x:x[A+1],y:x[A+2]})),A+=3;continue}if(B===g.translate){z.push(new h('translate',{x:x[A+1],y:x[A+2]})),A+=3;continue}if(B===g.rotate){z.push(new h('rotate',{cos:x[A+1],sin:x[A+2]})),A+=3;continue}if(B===g.skewX){z.push(new h('skewX',{x:x[A+1]})),A+=2;continue}if(B===g.skewY){z.push(new h('skewY',{y:x[A+1]})),A+=2;continue}if(q[B]){z.push(new h(q[B],{x:x[A+1],y:x[A+2],width:x[A+3],height:x[A+4]})),A+=5;continue}if(B===g.fillStyle||B===g.strokeStyle){let C=x[A+1],D=v(x,A+2,C);z.push(new h(B===g.fillStyle?'fillStyle':'strokeStyle',{value:D})),A+=2+C;continue}if(B===g.lineStyle){z.push(new h('lineStyle',{lineWidth:isNaN(x[A+1])?null:x[A+1],lineCap:isNaN(x[A+2])?null:k[x[A+2]]||null,lineJoin:isNaN(x[A+3])?null:k[x[A+3]]||null,miterLimit:isNaN(x[A+4])?null:x[A+4],lineDash:isNaN(x[A+6])?null:w(x,A+7,x[A+6]),lineDashOffset:isNaN(x[A+5])?null:x[A+5]})),A+=7+(isNaN(x[A+6])?0:x[A+6]);continue}if(B===g.textStyle){z.push(new h('textStyle',{font:isNaN(x[A+4])?null:v(x,A+5,x[A+4]),textAlign:isNaN(x[A+1])?null:m[x[A+1]]||null,textBaseline:isNaN(x[A+2])?null:l[x[A+2]]||null,direction:isNaN(x[A+3])?null:n[x[A+3]]||null})),A+=5+(isNaN(x[A+4])?0:x[A+4]);continue}if(B===g.shadowStyle){z.push(new h('shadowStyle',{shadowBlur:isNaN(x[A+1])?null:x[A+1],shadowColor:isNaN(x[A+4])?null:v(x,A+5,x[A+4]),shadowOffsetX:isNaN(x[A+2])?null:x[A+2],shadowOffsetY:isNaN(x[A+3])?null:x[A+3]})),A+=5+(isNaN(x[A+4])?0:x[A+4]);continue}if(r[B]){z.push(new h(r[B],{text:isNaN(x[A+4])?'':v(x,A+5,x[A+4]),x:x[A+1],y:x[A+2],maxWidth:isNaN(x[A+3])?null:x[A+3]})),A+=5+(isNaN(x[A+4])?0:x[A+4]);continue}if(B===g.arcTo){z.push(new h('arcTo',{x1:x[A+1],y1:x[A+2],x2:x[A+3],y2:x[A+4],r:x[A+5]})),A+=6;continue}if(s[B]){z.push(new h(s[B],{x:x[A+1],y:x[A+2],r:x[A+3],startAngle:x[A+4],endAngle:x[A+5],counterclockwise:!!x[A+6]})),A+=7;continue}if(B===g.ellipse){z.push(new h('ellipse',{x:x[A+1],y:x[A+2],radiusX:x[A+3],radiusY:x[A+4],rotation:x[A+5],startAngle:x[A+6],endAngle:x[A+7],anticlockwise:!!x[A+8]})),A+=9;continue}if(B===g.globalCompositeOperation){z.push(new h('globalCompositeOperation',{value:o[x[A+1]]})),A+=2;continue}if(B===g.hitRect){z.push(new h('hitRect',{id:v(x,A+6,x[A+5]),points:[[x[A+1],x[A+2]],[x[A+3],x[A+4]]]})),A+=6+x[A+5];continue}if(B===g.hitRegion){let C=[],D=x[A+1];for(let E=0;E<D;E++)A+=2,C.push([x[A],x[A+1]]);A+=2,z.push(new h('hitRegion',{id:v(x,A+1,x[A]),points:C})),A+=1+x[A];continue}if(u[B]){z.push(new h(u[B],{x:x[A+1],y:x[A+2]})),A+=3;continue}if(B===g.bezierCurveTo){z.push(new h('bezierCurveTo',{cp1x:x[A+1],cp1y:x[A+2],cp2x:x[A+3],cp2y:x[A+4],x:x[A+5],y:x[A+6]})),A+=7;continue}if(B===g.quadraticCurveTo){z.push(new h('quadraticCurveTo',{cpx:x[A+1],cpy:x[A+2],x:x[A+3],y:x[A+4]})),A+=5;continue}if(B===g.imageSmoothingEnabled){z.push(new h('imageSmoothingEnabled',{value:!!x[A+1]})),A+=2;continue}if(t[B]){z.push(new h(t[B])),A+=1;continue}if(B===g.custom){if(!y)throw new Error('Custom command object was falsy, did you forget to provide deserialize methods?');let C=v(x,A+2,x[A+1]);if(!y[C])throw new Error('Custom command serialized but no matching deserialize method provided.');A+=2+x[A+1],z.push(new h(C,y[C](x.slice(A+1,A+1+x[A])))),A+=1+x[A]}}return z}},function(b,c,d){let g=d(0),{Instruction:h,transformPoints:k,cycleMouseData:l}=d(9),m=[1,0,0,1,0,0],n=new Float64Array(m),o=[],q=[],r=[],s=[],t=[],u=[],v=[],w=[],x=new Float64Array(3006),y=6,z=[].concat,A=!1;'undefined'!=typeof CanvasRenderingContext2D&&(A=CanvasRenderingContext2D.prototype.hasOwnProperty('ellipse'));const B=()=>{let O=x;return x=new Float64Array(x.length+600),x.set(O),this};x.set(m),2*Math.PI;let C=O=>O&&O.splice(0,O.length),D=d(3),E=d(4),F=d(6),G=d(5),H=d(1),I=d(2),J={[g.fillRect]:'fillRect',[g.strokeRect]:'strokeRect',[g.clearRect]:'clearRect',[g.rect]:'rect'},K={[g.fillText]:'fillText',[g.strokeText]:'strokeText'},L={[g.moveTo]:'moveTo',[g.lineTo]:'lineTo'},M=d(8),N=d(7);b.exports=render},function(b,c,d){let g=[].concat,{Instruction:h}=d(9),k=d(0),l=d(3),m=d(4),n=d(6),o=d(5),q=d(1),r=d(2),s={endLineStyle:!0,endTextStyle:!0,endStrokeStyle:!0,endFillStyle:!0,endShadowStyle:!0,restore:!0,endGlobalCompositeOperation:!0,fill:!0,stroke:!0,beginClip:!0,clip:!0,endClip:!0,beginPath:!0,closePath:!0,endGlobalAlpha:!0,endImageSmoothingEnabled:!0},t={fillArc:!0,strokeArc:!0,arc:!0},u={moveTo:!0,lineTo:!0},v=d(10);b.exports=(...w)=>{let x={};for(let z=0;z<w.length;z++)for(;w[z]&&w[z].constructor===Array;)w=g.apply([],w);w[w.length-1].constructor!==h&&(x=w[w.length-1],w.splice(-1,1));let y=[];for(let z=0;z<w.length;z++){let{type:A,props:B}=w[z];if('transform'===A){y.push(k.transform,B[0],B[1],B[2],B[3],B[4],B[5]);continue}if('setTransform'===A){y.push(k.setTransform,B[0],B[1],B[2],B[3],B[4],B[5]);continue}if('scale'===A){y.push(k.scale,B.x,B.y);continue}if('translate'===A){y.push(k.translate,B.x,B.y);continue}if('rotate'===A){y.push(k.rotate,B.cos,B.sin);continue}if('skewX'===A){y.push(k.skewX,B.x);continue}if('skewY'===A){y.push(k.skewY,B.y);continue}if('fillRect'===A||'strokeRect'===A||'clearRect'===A||'rect'===A){y.push(k[A],B.x,B.y,B.width,B.height);continue}if('fillStyle'===A||'strokeStyle'===A){y.push(k[A],B.value.length),v(y,B.value);continue}if('lineStyle'===A){if(y.push(k.lineStyle,null===B.lineWidth?NaN:B.lineWidth,B.lineCap?l.indexOf(B.lineCap):NaN,B.lineJoin?m.indexOf(B.lineJoin):NaN,null===B.miterLimit?NaN:B.miterLimit,null===B.lineDashOffset?NaN:B.lineDashOffset,null===B.lineDash?NaN:B.lineDash.length),null!==B.lineDash)for(let C=0;C<B.lineDash.length;C++)y.push(B.lineDash);continue}if('textStyle'===A){y.push(k.textStyle,B.textAlign?o.indexOf(B.textAlign):NaN,B.textBaseline?n.indexOf(B.textBaseline):NaN,B.direction?q.indexOf(B.direction):NaN,B.font?B.font.length:NaN),null!==B.font&&v(y,B.font);continue}if('shadowStyle'===A){y.push(k.shadowStyle,null===B.shadowBlur?NaN:B.shadowBlur,null===B.shadowOffsetX?NaN:B.shadowOffsetX,null===B.shadowOffsetY?NaN:B.shadowOffsetY,null===B.shadowColor?NaN:B.shadowColor.length),null!==B.shadowColor&&v(y,B.shadowColor);continue}if('fillText'===A||'strokeText'===A){y.push(k[A],B.x,B.y,null===B.maxWidth?NaN:B.maxWidth,B.text.length),v(y,B.text);continue}if('arcTo'===A&&y.push(k.arcTo,B.x1,B.y1,B.x2,B.y2,B.r),t[A]){y.push(k[A],B.x,B.y,B.r,B.startAngle,B.endAngle,B.counterclockwise?1:0);continue}if('ellipse'===A){y.push(k.ellipse,B.x,B.y,B.radiusX,B.radiusY,B.rotation,B.startAngle,B.endAngle,B.anticlockwise?1:0);continue}if('globalCompositeOperation'===A){y.push(k.globalCombpositeOperation,r.indexOf(B.value));continue}if('globalAlpha'===A){y.push(k.globalAlpha,B.value);continue}if(u[A]){y.push(k[A],B.x,B.y);continue}if('hitRect'===A){y.push(k.hitRect,B.points[0][0],B.points[0][1],B.points[1][0],B.points[1][1],B.id.length),v(y,B.id);continue}if('hitRegion'===A){y.push(k.hitRegion,B.points.length);for(let C=0;C<B.points.length;C++)y.push(B.points[C][0],B.points[C][1]);y.push(B.id.length),v(y,B.id);continue}if('bezierCurveTo'===A){y.push(k.bezierCurveTo,B.cp1x,B.cp1y,B.cp2x,B.cp2y,B.x,B.y);continue}if('quadraticCurveTo'===A){y.push(k.quadraticCurveTo,B.cpx,B.cpy,B.x,B.y);continue}if('imageSmoothingEnabled'===A){y.push(k.imageSmoothingEnabled,B.value?1:0);continue}if(s.hasOwnProperty(A)){y.push(k[A]);continue}if(x.hasOwnProperty(A)){y.push(k.custom,A.length),v(y,A);let C=x[A](B);y.push(C.length);for(let D=0;D<C.length;D++)y.push(C[D]);continue}}return new Float64Array(y)}},function(b,c,d){var g=d(12),h=d(11);b.exports=g.keys().reduce(function(k,l){return k[h.basename(l,h.extname(l))]=g(l),k},{})}])});