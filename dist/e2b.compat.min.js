!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("e2d")):"function"==typeof define&&define.amd?define(["e2d"],t):"object"==typeof exports?exports.e2b=t(require("e2d")):e.e2b=t(e.e2d)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,n){"use strict";e.exports={transform:0,setTransform:1,scale:2,translate:3,rotate:4,skewX:5,skewY:6,restore:7,fillRect:8,strokeRect:9,clearRect:10,rect:11,fillStyle:12,strokeStyle:13,endFillStyle:14,endStrokeStyle:15,lineStyle:16,endLineStyle:17,textStyle:18,endTextStyle:19,shadowStyle:20,endShadowStyle:21,fillText:22,strokeText:23,fillArc:24,strokeArc:25,arc:26,ellipse:27,globalCompositeOperation:28,endGlobalCompositeOperation:29,fill:30,stroke:31,beginClip:32,clip:33,endClip:34,beginPath:35,closePath:36,globalAlpha:37,endGlobalAlpha:38,hitRect:39,hitRegion:40,moveTo:41,lineTo:42,bezierCurveTo:43,quadraticCurveTo:44,imageSmoothingEnabled:45,endImageSmoothingEnabled:46,custom:47,arcTo:48}},function(e,t,n){"use strict";e.exports=["ltr","rtl","inherit"]},function(e,t,n){"use strict";e.exports=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,t,n){"use strict";e.exports=["butt","round","square"]},function(e,t,n){"use strict";e.exports=["bevel","round","miter"]},function(e,t,n){"use strict";e.exports=["left","right","center","start","end"]},function(e,t,n){"use strict";e.exports=["top","hanging","middle","alphabetic","ideographic","bottom"]},function(e,t,n){"use strict";e.exports=function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[i]);return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r}},function(t,n){t.exports=e},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=0;n<t.length;n++)e.push(t.charCodeAt(n))}},function(e,t,n){"use strict";(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){return!!e}function i(e){return!!e}function o(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}function l(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function s(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,u=function(e){return a.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var l=o>=0?arguments[o]:e.cwd();if("string"!=typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(t=l+"/"+t,i="/"===l.charAt(0))}return t=n(s(t.split("/"),r),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===c(e,-1);return e=n(s(e.split("/"),i),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,o).join("/"))},t.relative=function(e,n){e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=l(e.split("/")),i=l(n.split("/")),o=Math.min(r.length,i.length),s=o,a=0;a<o;a++)if(r[a]!==i[a]){s=a;break}for(var u=[],a=s;a<r.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=u(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=u(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return u(e)[3]};var c="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(13))},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./consts.js":0,"./deserialize.js":14,"./directionProps.js":1,"./getArray.js":7,"./getString.js":8,"./globalCompositeOperationProps.js":2,"./lineCapProps.js":3,"./lineJoinProps.js":4,"./pushString.js":10,"./render.js":15,"./serialize.js":16,"./textAlignProps.js":5,"./textBaselineProps.js":6};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=12},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function l(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?y=d.concat(y):m=-1,y.length&&a())}function a(){if(!g){var e=o(s);g=!0;for(var t=y.length;t;){for(d=y,y=[];++m<t;)d&&d[m].run();m=-1,t=y.length}d=null,g=!1,l(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,h,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,y=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new u(e,t)),1!==y.length||g||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";var r,i,o,l,s,a=n(0),u=n(9),c=u.Instruction,f=n(3),h=(n(4),n(6)),p=n(5),d=n(1),y=n(2),g=(r={},r[a.fillRect]="fillRect",r[a.strokeRect]="strokeRect",r[a.clearRect]="clearRect",r[a.rect]="rect",r),m=(i={},i[a.fillText]="fillText",i[a.strokeText]="strokeText",i),x=(o={},o[a.fillArc]="fillArc",o[a.strokeArc]="strokeArc",o[a.arc]="arc",o),w=(l={},l[a.endFillStyle]="endFillStyle",l[a.endLineStyle]="endLineStyle",l[a.endStrokeStyle]="endStrokeStyle",l[a.endLineStyle]="endLineStyle",l[a.endShadowStyle]="endShadowStyle",l[a.endTextStyle]="endTextStyle",l[a.restore]="restore",l[a.endGlobalCompositeOperation]="endGlobalCompositeOperation",l[a.fill]="fill",l[a.stroke]="stroke",l[a.beginClip]="beginClip",l[a.clip]="clip",l[a.endClip]="endClip",l[a.beginPath]="beginPath",l[a.closePath]="closePath",l[a.endGlobalAlpha]="endGlobalAlpha",l[a.endImageSmoothingEnabled]="endImageSmoothingEnabled",l),v=(s={},s[a.moveTo]="moveTo",s[a.lineTo]="lineTo",s),b=n(8),N=n(7),S=function(e,t){for(var n=[],r=0;r<e.length;){var i=e[r];if(i!==a.transform)if(i!==a.setTransform)if(i!==a.scale)if(i!==a.translate)if(i!==a.rotate)if(i!==a.skewX)if(i!==a.skewY)if(g[i])n.push(new c(g[i],{x:e[r+1],y:e[r+2],width:e[r+3],height:e[r+4]})),r+=5;else if(i!==a.fillStyle&&i!==a.strokeStyle)if(i!==a.lineStyle)if(i!==a.textStyle)if(i!==a.shadowStyle)if(m[i])n.push(new c(m[i],{text:isNaN(e[r+4])?"":b(e,r+5,e[r+4]),x:e[r+1],y:e[r+2],maxWidth:isNaN(e[r+3])?null:e[r+3]})),r+=5+(isNaN(e[r+4])?0:e[r+4]);else if(i!==a.arcTo)if(x[i])n.push(new c(x[i],{x:e[r+1],y:e[r+2],r:e[r+3],startAngle:e[r+4],endAngle:e[r+5],counterclockwise:!!e[r+6]})),r+=7;else if(i!==a.ellipse)if(i!==a.globalCompositeOperation)if(i!==a.hitRect)if(i!==a.hitRegion)if(v[i])n.push(new c(v[i],{x:e[r+1],y:e[r+2]})),r+=3;else if(i!==a.bezierCurveTo)if(i!==a.quadraticCurveTo)if(i!==a.imageSmoothingEnabled){if(w[i])n.push(new c(w[i])),r+=1;else if(i===a.custom){if(!t)throw new Error("Custom command object was falsy, did you forget to provide deserialize methods?");var o=b(e,r+2,e[r+1]);if(!t[o])throw new Error("Custom command serialized but no matching deserialize method provided.");r+=2+e[r+1],n.push(new c(o,t[o](e.slice(r+1,r+1+e[r])))),r+=1+e[r]}}else n.push(new c("imageSmoothingEnabled",{value:!!e[r+1]})),r+=2;else n.push(new c("quadraticCurveTo",{cpx:e[r+1],cpy:e[r+2],x:e[r+3],y:e[r+4]})),r+=5;else n.push(new c("bezierCurveTo",{cp1x:e[r+1],cp1y:e[r+2],cp2x:e[r+3],cp2y:e[r+4],x:e[r+5],y:e[r+6]})),r+=7;else{for(var l=[],s=e[r+1],u=0;u<s;u++)r+=2,l.push([e[r],e[r+1]]);r+=2,n.push(new c("hitRegion",{id:b(e,r+1,e[r]),points:l})),r+=1+e[r]}else n.push(new c("hitRect",{id:b(e,r+6,e[r+5]),points:[[e[r+1],e[r+2]],[e[r+3],e[r+4]]]})),r+=6+e[r+5];else n.push(new c("globalCompositeOperation",{value:y[e[r+1]]})),r+=2;else n.push(new c("ellipse",{x:e[r+1],y:e[r+2],radiusX:e[r+3],radiusY:e[r+4],rotation:e[r+5],startAngle:e[r+6],endAngle:e[r+7],anticlockwise:!!e[r+8]})),r+=9;else n.push(new c("arcTo",{x1:e[r+1],y1:e[r+2],x2:e[r+3],y2:e[r+4],r:e[r+5]})),r+=6;else n.push(new c("shadowStyle",{shadowBlur:isNaN(e[r+1])?null:e[r+1],shadowColor:isNaN(e[r+4])?null:b(e,r+5,e[r+4]),shadowOffsetX:isNaN(e[r+2])?null:e[r+2],shadowOffsetY:isNaN(e[r+3])?null:e[r+3]})),r+=5+(isNaN(e[r+4])?0:e[r+4]);else n.push(new c("textStyle",{font:isNaN(e[r+4])?null:b(e,r+5,e[r+4]),textAlign:isNaN(e[r+1])?null:p[e[r+1]]||null,textBaseline:isNaN(e[r+2])?null:h[e[r+2]]||null,direction:isNaN(e[r+3])?null:d[e[r+3]]||null})),r+=5+(isNaN(e[r+4])?0:e[r+4]);else n.push(new c("lineStyle",{lineWidth:isNaN(e[r+1])?null:e[r+1],lineCap:isNaN(e[r+2])?null:f[e[r+2]]||null,lineJoin:isNaN(e[r+3])?null:f[e[r+3]]||null,miterLimit:isNaN(e[r+4])?null:e[r+4],lineDash:isNaN(e[r+6])?null:N(e,r+7,e[r+6]),lineDashOffset:isNaN(e[r+5])?null:e[r+5]})),r+=7+(isNaN(e[r+6])?0:e[r+6]);else{var S=e[r+1],T=b(e,r+2,S);n.push(new c(i===a.fillStyle?"fillStyle":"strokeStyle",{value:T})),r+=2+S}else n.push(new c("skewY",{y:e[r+1]})),r+=2;else n.push(new c("skewX",{x:e[r+1]})),r+=2;else n.push(new c("rotate",{cos:e[r+1],sin:e[r+2]})),r+=3;else n.push(new c("translate",{x:e[r+1],y:e[r+2]})),r+=3;else n.push(new c("scale",{x:e[r+1],y:e[r+2]})),r+=3;else n.push(new c("setTransform",[e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6]])),r+=7;else n.push(new c("transform",[e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6]])),r+=7}return n};e.exports=S},function(e,t,n){"use strict";var r,i,o,l=n(0),s=n(9),a=(s.Instruction,s.transformPoints,s.cycleMouseData,[1,0,0,1,0,0]),u=(new Float64Array(a),new Float64Array(3006)),c=([].concat,!1);"undefined"!=typeof CanvasRenderingContext2D&&(c=CanvasRenderingContext2D.prototype.hasOwnProperty("ellipse"));u.set(a);2*Math.PI,n(3),n(4),n(6),n(5),n(1),n(2),r={},r[l.fillRect]="fillRect",r[l.strokeRect]="strokeRect",r[l.clearRect]="clearRect",r[l.rect]="rect",r,i={},i[l.fillText]="fillText",i[l.strokeText]="strokeText",i,o={},o[l.moveTo]="moveTo",o[l.lineTo]="lineTo",o,n(8),n(7);e.exports=render},function(e,t,n){"use strict";var r=[].concat,i=n(9),o=i.Instruction,l=n(0),s=n(3),a=n(4),u=n(6),c=n(5),f=n(1),h=n(2),p={endLineStyle:!0,endTextStyle:!0,endStrokeStyle:!0,endFillStyle:!0,endShadowStyle:!0,restore:!0,endGlobalCompositeOperation:!0,fill:!0,stroke:!0,beginClip:!0,clip:!0,endClip:!0,beginPath:!0,closePath:!0,endGlobalAlpha:!0,endImageSmoothingEnabled:!0},d={fillArc:!0,strokeArc:!0,arc:!0},y={moveTo:!0,lineTo:!0},g=n(10),m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i={},m=0;m<t.length;m++)for(;t[m]&&t[m].constructor===Array;)t=r.apply([],t);t[t.length-1].constructor!==o&&(i=t[t.length-1],t.splice(-1,1));for(var x=[],w=0;w<t.length;w++){var v=t[w],b=v.type,N=v.props;if("transform"!==b)if("setTransform"!==b)if("scale"!==b)if("translate"!==b)if("rotate"!==b)if("skewX"!==b)if("skewY"!==b)if("fillRect"!==b&&"strokeRect"!==b&&"clearRect"!==b&&"rect"!==b)if("fillStyle"!==b&&"strokeStyle"!==b){if("lineStyle"!==b)if("textStyle"!==b)if("shadowStyle"!==b)if("fillText"!==b&&"strokeText"!==b)if("arcTo"===b&&x.push(l.arcTo,N.x1,N.y1,N.x2,N.y2,N.r),d[b])x.push(l[b],N.x,N.y,N.r,N.startAngle,N.endAngle,N.counterclockwise?1:0);else if("ellipse"!==b)if("globalCompositeOperation"!==b)if("globalAlpha"!==b)if(y[b])x.push(l[b],N.x,N.y);else if("hitRect"!==b)if("hitRegion"!==b)if("bezierCurveTo"!==b)if("quadraticCurveTo"!==b)if("imageSmoothingEnabled"!==b)if(p.hasOwnProperty(b))x.push(l[b]);else if(i.hasOwnProperty(b)){x.push(l.custom,b.length),g(x,b);var S=i[b](N);x.push(S.length);for(var T=0;T<S.length;T++)x.push(S[T])}else;else x.push(l.imageSmoothingEnabled,N.value?1:0);else x.push(l.quadraticCurveTo,N.cpx,N.cpy,N.x,N.y);else x.push(l.bezierCurveTo,N.cp1x,N.cp1y,N.cp2x,N.cp2y,N.x,N.y);else{x.push(l.hitRegion,N.points.length);for(var k=0;k<N.points.length;k++)x.push(N.points[k][0],N.points[k][1]);x.push(N.id.length),g(x,N.id)}else x.push(l.hitRect,N.points[0][0],N.points[0][1],N.points[1][0],N.points[1][1],N.id.length),g(x,N.id);else x.push(l.globalAlpha,N.value);else x.push(l.globalCombpositeOperation,h.indexOf(N.value));else x.push(l.ellipse,N.x,N.y,N.radiusX,N.radiusY,N.rotation,N.startAngle,N.endAngle,N.anticlockwise?1:0);else x.push(l[b],N.x,N.y,null!==N.maxWidth?N.maxWidth:NaN,N.text.length),g(x,N.text);else x.push(l.shadowStyle,null!==N.shadowBlur?N.shadowBlur:NaN,null!==N.shadowOffsetX?N.shadowOffsetX:NaN,null!==N.shadowOffsetY?N.shadowOffsetY:NaN,null!==N.shadowColor?N.shadowColor.length:NaN),null!==N.shadowColor&&g(x,N.shadowColor);else x.push(l.textStyle,N.textAlign?c.indexOf(N.textAlign):NaN,N.textBaseline?u.indexOf(N.textBaseline):NaN,N.direction?f.indexOf(N.direction):NaN,N.font?N.font.length:NaN),null!==N.font&&g(x,N.font);else if(x.push(l.lineStyle,null!==N.lineWidth?N.lineWidth:NaN,N.lineCap?s.indexOf(N.lineCap):NaN,N.lineJoin?a.indexOf(N.lineJoin):NaN,null!==N.miterLimit?N.miterLimit:NaN,null!==N.lineDashOffset?N.lineDashOffset:NaN,null!==N.lineDash?N.lineDash.length:NaN),null!==N.lineDash)for(var C=0;C<N.lineDash.length;C++)x.push(N.lineDash)}else x.push(l[b],N.value.length),g(x,N.value);else x.push(l[b],N.x,N.y,N.width,N.height);else x.push(l.skewY,N.y);else x.push(l.skewX,N.x);else x.push(l.rotate,N.cos,N.sin);else x.push(l.translate,N.x,N.y);else x.push(l.scale,N.x,N.y);else x.push(l.setTransform,N[0],N[1],N[2],N[3],N[4],N[5]);else x.push(l.transform,N[0],N[1],N[2],N[3],N[4],N[5])}return new Float64Array(x)};e.exports=m},function(e,t,n){"use strict";var r=n(12),i=n(11);e.exports=r.keys().reduce(function(e,t){return e[i.basename(t,i.extname(t))]=r(t),e},{})}])});